# CommitTutor 项目框架生成提示词（供 Codex 使用）

## 项目目标

你是一个资深的软件工程助手，请为一个教学向的 Python 项目 **搭建整体工程框架**，而不是一次性实现全部功能。

该项目名为 **CommitTutor**，是一款面向学生开发者的 **代码提交辅导工具**，核心目标是：
- 对单次代码提交进行分析
- 通过分阶段反馈，引导用户改进代码质量
- 不直接判定“错误 / 风险”，而是提供辅导、建议与学习支持

本次任务 **仅要求你搭建清晰、可扩展的项目框架与基础代码结构**，所有具体算法、模型与业务逻辑均使用占位实现。

---

## 技术与约束

- 使用 **Python**
- 项目以 **命令行（CLI）** 作为主要交互入口
- 项目分为四个核心层次：
  1. CLI 交互层（用户入口）
  2. 配置管理层（用户配置与持久化）
  3. 缺陷检测小模型层（输出改进可能性评分）
  4. 大语言模型调用层（提供文本评价、建议与学习资料）

---

## 用户配置管理要求（非常重要）

项目在首次运行时，应当检查 **用户是否已创建配置文件**。

### 配置逻辑设计要求：

- 若未检测到配置文件：
  - 通过 CLI 交互方式，引导用户输入以下信息：
    - 大语言模型的 BASE_URL
    - 大语言模型的 API_KEY
  - 将用户输入的信息保存为本地配置文件（如 config.yaml / config.json）
  - 后续运行自动读取该配置文件，不再重复询问

- 若已存在配置文件：
  - 直接读取配置并继续执行流程

配置模块需满足：
- 与 CLI 解耦
- 便于后续扩展（如模型参数、阈值设置等）
- 使用占位实现即可（无需真实校验 API）

---

## CLI 交互设计要求

CLI 应具有清晰、稳定、教学工具风格的交互体验。

推荐启动流程示例（可在此基础上合理美化）：

```
CommitTutor v1.0
----------------------------------------
正在检查用户配置...

未检测到配置文件，需要进行初始配置。
请输入大语言模型 BASE_URL：
> 

请输入大语言模型 API_KEY：
> 

配置已保存，初始化完成。
----------------------------------------
```

正常运行流程示例：

```
CommitTutor v1.0
----------------------------------------
正在尝试获取本地仓库的最新一次提交...

✔ 已获取最新提交
提交信息：
- Commit ID: xxxxxxxx
- Author: xxx
- Message: xxx
- Time: xxxx-xx-xx xx:xx

是否以该次提交进行代码辅导分析？(Y/N)
```

分析阶段示例：

```
正在分析本次代码提交...
[##########------] 60%

分析完成，正在综合评价...
```

模型输出示例：

```
改进可能性评分：0.72

综合评价：
（此处由大语言模型生成自然语言评价文本，
从可读性、结构、潜在问题等角度进行说明，
避免直接使用“错误”“缺陷”等词语）
```

若评分较高：

```
建议你根据以上反馈对代码进行修改，
完成修改后请重新提交代码。

完成新的提交后，输入 F 继续辅导流程：
```

若评分较低：

```
本次提交整体表现良好，未发现明显需要改进的地方。
是否仍希望查看进一步的优化建议？(Y/N)
```

---

## 核心功能流程（仅用于理解）

1. CLI 启动
2. 检查并加载用户配置
3. 获取最近一次 Git 提交
4. 用户确认是否分析
5. 调用缺陷检测小模型，输出评分
6. 根据评分决定是否调用大模型
7. 输出辅导建议或通过提示
8. 支持用户再次提交并重复流程

---

## 你的任务

你需要完成以下内容：

- 设计整体项目目录结构
- 搭建 CLI 主流程代码
- 设计配置管理模块接口
- 设计缺陷检测模块接口
- 设计大模型调用模块接口
- 在 CLI 中体现上述交互流程（使用 print 占位）

禁止事项：
- 不实现真实模型
- 不调用真实 API
- 不写复杂业务逻辑

请使用：
- pass
- raise NotImplementedError
- TODO 注释

---

## 目录结构建议（可自行调整）

- cli/
- config/
- git_utils/
- detector/
- advisor/
- workflow/
- main.py
